[phases.setup]
nixPkgs = ["nodejs_20", "pnpm"]

[phases.install]
cmds = ["pnpm install --frozen-lockfile"]

[phases.build]
cmds = ["rm -rf .next", "rm -f tsconfig.tsbuildinfo", "find . -name '.DS_Store' -delete", "pnpm build"]

[start]
cmd = "pnpm start"

[variables]
NODE_ENV = "production"
PORT = "8080"
