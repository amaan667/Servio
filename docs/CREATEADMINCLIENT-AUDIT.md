["venueId]/settings/page.tsx`\n- `app/dashboard/[venueId]/kds/page.tsx`\n- `app/dashboard/[venueId]/feedback/page.tsx`\n- `app/dashboard/[venueId]/menu-management/page.tsx`\n- `app/dashboard/[venueId]/page.tsx`\n- `app/dashboard/[venueId]/analytics/page.tsx`\n\n**Action Required:** Review and replace with RLS-respecting clients\n\n### 6. Other Files (6 files) - **LOW**\n\n- `lib/monitoring.ts` - May need review\n- `lib/ml-feedback.ts` - May need review\n- `lib/counts/unified-counts.ts` - May need review\n- `app/receipts/[orderId]/page.tsx` - May need review\n\n**Action Required:** Review on case-by-case basis\n\n## Implementation Plan\n\n### Phase 1: Critical Security Fixes (AI Tools)\n\n1. Replace `createAdminClient` in all AI tool files with RLS-respecting client factory\n2. Add tenant_id filtering to all AI tool queries\n3. Create security test suite for cross-tenant access prevention\n\n### Phase 2: Service Layer\n\n1. Review service layer files\n2. Replace with RLS-respecting clients where appropriate\n3. Update service layer to use transactional RPC functions\n\n### Phase 3: API Routes\n\n1. Audit all API routes\n2. Identify admin routes vs regular routes\n3. Replace with RLS-respecting clients in regular routes\n4. Keep admin routes using `createAdminClient` with proper authorization\n\n### Phase 4: Dashboard Pages\n\n1. Review dashboard pages\n2. Replace with RLS-respecting clients where appropriate\n\n### Phase 5: Other Files\n\n1. Review remaining files on case-by-case basis\n2. Replace with RLS-respecting clients where appropriate\n\n## Testing Strategy\n\n1. Create security test suite for cross-tenant access prevention\n2. Add integration tests for multi-tenant isolation\n3. Add race condition tests for payment operations\n4. Add load tests for critical API endpoints\n\n## Monitoring\n\n1. Add logging for all `createAdminClient` usage\n2. Add alerts for potential cross-tenant access attempts\n3. Add metrics for RLS policy violations\n\n## Notes\n\n- Test files (`./__tests__/`) are expected to use `createAdminClient` and should not be changed\n- Admin routes (`./app/api/admin/**`) are expected to use `createAdminClient` with proper authorization\n- Seed scripts and migration files are expected to use `createAdminClient`\n- The linting rule added in Phase 1 will prevent new usage of `createAdminClient` in non-admin code"]