# Servio Environment Variables
# Copy this file to .env.local for local development
# For production, set these in your deployment platform (Railway, Vercel, etc.)

# =============================================================================
# REQUIRED (Production)
# =============================================================================

# Supabase Configuration
# Get these from your Supabase project settings: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Stripe Configuration (Required for payment processing)
# Get these from Stripe Dashboard: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your-secret-key-here
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret-here

# =============================================================================
# OPTIONAL (Recommended for Production)
# =============================================================================

# Application URLs
# The public-facing URL of your application
NEXT_PUBLIC_APP_URL=https://your-app-domain.com
NEXT_PUBLIC_SITE_URL=https://your-app-domain.com
NEXT_PUBLIC_BASE_URL=https://your-app-domain.com
APP_URL=https://your-app-domain.com

# Database (Optional - Supabase handles this, but can be used for direct PostgreSQL access)
DATABASE_URL=postgresql://user:password@host:5432/database

# Stripe Publishable Key (Required for client-side Stripe integration)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-publishable-key-here

# Stripe Customer Webhook Secret (Optional - for customer portal webhooks)
STRIPE_CUSTOMER_WEBHOOK_SECRET=whsec_your-customer-webhook-secret-here

# Stripe Price IDs (Optional - for subscription tiers)
STRIPE_BASIC_PRICE_ID=price_basic_tier_id
STRIPE_STANDARD_PRICE_ID=price_standard_tier_id
STRIPE_PREMIUM_PRICE_ID=price_premium_tier_id

# =============================================================================
# OPTIONAL (Feature-Specific)
# =============================================================================

# Redis (Optional - for rate limiting and caching)
# If not provided, rate limiting falls back to in-memory storage
REDIS_URL=redis://localhost:6379
# OR use individual Redis settings:
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# OpenAI (Optional - for AI assistant features)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Email Service (Optional - for sending receipts and notifications)
RESEND_API_KEY=re_your-resend-api-key-here

# Monitoring & Error Tracking (Optional - recommended for production)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# Cron Jobs (Optional - for scheduled tasks)
CRON_SECRET=your-random-secret-for-cron-authentication

# Railway (Optional - auto-detected if deployed on Railway)
RAILWAY_PUBLIC_DOMAIN=https://your-app.up.railway.app

# Logging (Optional - defaults to 'info' in production, 'debug' in development)
LOG_LEVEL=info

# APM (Application Performance Monitoring) - Optional
# Options: "datadog", "newrelic", or "none" (default)
APM_PROVIDER=none

# Datadog Configuration (if APM_PROVIDER=datadog)
DD_SERVICE=servio-api
DD_ENV=production
DD_VERSION=0.1.6
DD_PROFILING_ENABLED=false

# New Relic Configuration (if APM_PROVIDER=newrelic)
# Requires newrelic.js config file and NEW_RELIC_LICENSE_KEY
NEW_RELIC_LICENSE_KEY=your-newrelic-license-key

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Node Environment (automatically set by Next.js, but can be overridden)
NODE_ENV=development

# =============================================================================
# NOTES
# =============================================================================
#
# 1. All NEXT_PUBLIC_* variables are exposed to the browser
#    - Never put secrets in NEXT_PUBLIC_* variables
#    - These are bundled into the client-side code
#
# 2. Required variables in production:
#    - NEXT_PUBLIC_SUPABASE_URL
#    - NEXT_PUBLIC_SUPABASE_ANON_KEY
#    - SUPABASE_SERVICE_ROLE_KEY
#    - STRIPE_SECRET_KEY
#    - STRIPE_WEBHOOK_SECRET
#
# 3. The application will fail to start in production if required variables are missing
#
# 4. For local development, create .env.local (this file is git-ignored)
#
# 5. For Railway deployment, set these in the Railway dashboard under Variables
#
# 6. Stripe keys:
#    - Use test keys (sk_test_*, pk_test_*) for development
#    - Use live keys (sk_live_*, pk_live_*) for production
#    - Webhook secrets are different for test and live modes
#
# 7. Supabase keys:
#    - Anon key: Safe to expose to client (has RLS protection)
#    - Service role key: NEVER expose to client (bypasses RLS)
#
# 8. Redis is optional but recommended for production:
#    - Provides persistent rate limiting
#    - Enables distributed caching
#    - Falls back gracefully if not configured
#
# 9. Sentry is highly recommended for production:
#    - Provides error tracking and monitoring
#    - Helps debug production issues
#    - Free tier available
#
# 10. OpenAI API key is only needed if using AI assistant features
#     - Features work without it, but AI capabilities are disabled
