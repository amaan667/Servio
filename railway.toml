# Railway Configuration
# Explicitly use NIXPACKS builder to prevent Metal builds
# Railway will respect this and not auto-enable Metal builds

[build]
builder = "NIXPACKS"
buildCommand = "pnpm install --frozen-lockfile && NODE_OPTIONS='--max-old-space-size=4096' pnpm run build"

[deploy]
startCommand = "pnpm start"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10