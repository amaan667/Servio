# Removed [build] section completely to let Railway use default Nixpacks
# This prevents any Metal build environment from being forced via config
# Railway will auto-detect and use Nixpacks based on nixpacks.toml

[deploy]
startCommand = "pnpm start"
healthcheckPath = "/api/health"
healthcheckTimeout = 5
healthcheckInterval = 5
restartPolicyType = "on_failure"
# Force deployment by ensuring changes are detected
# Note: Railway CLI 'railway up' bypasses "Wait for CI" setting

# Cron job for daily reset at midnight
[[cron]]
schedule = "0 0 * * *"
command = "curl -X POST -H 'Authorization: Bearer $CRON_SECRET' $RAILWAY_PUBLIC_DOMAIN/api/cron/daily-reset"